<div class="container">
  <h1>Campus Ideas</h1>
  <h2>I. liste des suggestions</h2>
  <h3>R√©dacteur : une suggestion</h3>

  <div class="search-bar">
    <input 
      type="text" 
      [(ngModel)]="searchTerm"
      placeholder="Rechercher par titre ou cat√©gorie"
    >
  </div>

  <!-- Bouton Ajouter une suggestion (plac√© ici, une seule fois) -->
  <div class="add-button">
    <button routerLink="/suggestions/new" class="btn-add">+ Ajouter une suggestion</button>
  </div>

  <!-- Liste des suggestions filtr√©es -->
  <div class="suggestion" *ngFor="let suggestion of filteredSuggestions()">
    <h4>{{ suggestion.title }}</h4>
    <div class="meta">
      <span class="category">{{ suggestion.category }}</span> :
      <span class="date">{{ suggestion.date | date:'d MMM yyyy' }}</span>
    </div>
    <p class="description">{{ suggestion.description }}</p>

    <!-- Badge de statut avec libell√© personnalis√© -->
    <div 
      class="status-badge" 
      [ngClass]="{
        'accepte': suggestion.status === 'acceptee',
        'refuse': suggestion.status === 'refusee'
      }"
    >
      <ng-container [ngSwitch]="suggestion.status">
        <span *ngSwitchCase="'acceptee'">ACCEPTE</span>
        <span *ngSwitchCase="'refusee'">REFUSE</span>
        <span *ngSwitchDefault>EN ATTENTE</span>
      </ng-container>
    </div>

    <!-- Boutons Like, Favoris et D√©tails (cach√©s si statut = refusee) -->
    <div class="actions" *ngIf="suggestion.status !== 'refusee'">
      <button (click)="like(suggestion)" class="like-btn">
        üëç Like {{ suggestion.nbLikes }}
      </button>
      <button (click)="addToFavorites(suggestion)" class="favorite-btn">
        Ajouter aux favoris
      </button>
      <button [routerLink]="['/suggestions', suggestion.id]" class="details-btn">
        D√©tails
      </button>
    </div>
    <hr>
  </div>
</div>